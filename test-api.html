<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
</head>
<body>
    <h1>API Connection Test</h1>
    <button onclick="testHealth()">Test Health Endpoint</button>
    <button onclick="testLogin()">Test Login</button>
    <pre id="output"></pre>

    <script>
        const output = document.getElementById('output');
        
        async function testHealth() {
            output.textContent = 'Testing health endpoint...\n';
            try {
                const response = await fetch('http://localhost:3001/health');
                const text = await response.text();
                output.textContent += 'SUCCESS: ' + text + '\n';
            } catch (error) {
                output.textContent += 'ERROR: ' + error.message + '\n';
            }
        }
        
        async function testLogin() {
            output.textContent = 'Testing login endpoint...\n';
            try {
                const response = await fetch('http://localhost:3001/api/users/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: 'firas.kiftaro@moe.gov.ae',
                        password: '1234'
                    })
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    output.textContent += 'FAIL: ' + JSON.stringify(error, null, 2) + '\n';
                } else {
                    const user = await response.json();
                    output.textContent += 'SUCCESS: ' + JSON.stringify(user, null, 2) + '\n';
                }
            } catch (error) {
                output.textContent += 'ERROR: ' + error.message + '\n';
                output.textContent += 'This usually means:\n';
                output.textContent += '1. Server is not running on port 3001\n';
                output.textContent += '2. CORS is blocking the request\n';
                output.textContent += '3. Network error\n';
            }
        }
        
        // Auto-test on load
        window.onload = () => {
            testHealth();
        };
    </script>
</body>
</html>
